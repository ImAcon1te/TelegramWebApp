{% extends 'base.html' %}

{% block title %}Создать предложение{% endblock %}

{% block content %}

        <div style="margin-bottom: 20px;">
          <a href="{{ url_for('sale_offers') }}">Заявки на продажу</a>
        </div>


        <div style="margin-bottom: 20px;">
          <a href="{{ url_for('rental_offers') }}">Заявки аренду</a>
        </div>

        <div style="margin-bottom: 20px;">
          <a href="{{ url_for('purchase_offers') }}">Заявки на покупку</a>
        </div>


  <h1>Создать предложение</h1>
  <form action="{{ url_for('create_offer') }}" method="POST">
      
      <div>
          <label for="offer_type">Тип предложения:</label>
          <select name="offer_type" id="offer_type" required>
              <option value="">Выберите тип</option>
              <option value="sale">Продажа</option>
              <option value="purchase">Закупка</option>
              <option value="rental">Аренда</option>
          </select>
      </div>

      <div id="common_sale_purchase" style="display: none;">
          <div>
              <label for="commodity_type">Тип культуры/товара:</label>
              <input type="text" name="commodity_type" id="commodity_type">
          </div>
          <div>
              <label for="tonnage">Тоннаж:</label>
              <input type="number" step="0.01" name="tonnage" id="tonnage">
          </div>
          <div>
              <label for="price_per_ton">Цена за тонну:</label>
              <input type="number" step="0.01" name="price_per_ton" id="price_per_ton">
          </div>
          <div>
              <label for="region_id">Регион:</label>
              <select name="region_id" id="region_id">
                  <option value="">Выберите регион</option>
                  {% for region in regions %}
                      <option value="{{ region.id }}">{{ region.name }}</option>
                  {% endfor %}
              </select>
          </div>
      </div>

      <div id="rental_offer" style="display: none;">
          <div>
              <label for="equipment_type">Тип техники:</label>
              <input type="text" name="equipment_type" id="equipment_type">
          </div>
          <div>
              <label for="rental_price">Стоимость аренды:</label>
              <input type="number" step="0.01" name="rental_price" id="rental_price">
          </div>
          <div>
              <label for="time_unit">Единица времени:</label>
              <select name="time_unit" id="time_unit">
                  <option value="">Выберите единицу</option>
                  {% for unit in time_units %}
                      <option value="{{ unit }}">{{ unit }}</option>
                  {% endfor %}
              </select>
          </div>
      </div>
      
      <div>
          <label for="additional_info">Дополнительная информация:</label>
          <textarea name="additional_info" id="additional_info"></textarea>
      </div>
      
      <button type="submit">Создать предложение</button>
  </form>
  
  <script>
      document.getElementById('offer_type').addEventListener('change', function() {
          var type = this.value;
          var commonSection = document.getElementById('common_sale_purchase');
          var rentalSection = document.getElementById('rental_offer');
          
          if (type === 'sale' || type === 'purchase') {
              commonSection.style.display = 'block';
              rentalSection.style.display = 'none';
          } else if (type === 'rental') {
              rentalSection.style.display = 'block';
              commonSection.style.display = 'none';
          } else {
              commonSection.style.display = 'none';
              rentalSection.style.display = 'none';
          }
      });
  </script>
{% endblock %}
