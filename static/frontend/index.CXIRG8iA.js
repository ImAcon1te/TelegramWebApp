import{r as p,j as e}from"./main.js";var x=p();const h=({label:r,id:a,name:i,value:l,placeholder:o="",required:s=!1,onChange:n,type:t="text"})=>e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:a,className:"form-label",children:r}),e.jsx("input",{type:t,className:"form-control",name:i,id:a,value:l,placeholder:o,required:s,onChange:n})]}),f=({regions:r=[]})=>{const[a,i]=x.useState({firstName:"",lastName:"",phone:"",region:r.length>0?r[0].id:"",isSale:!1,isPurchase:!1,isRental:!1}),l=s=>{const{name:n,value:t,type:c}=s.target;let m=!1;s.target instanceof HTMLInputElement&&(m=s.target.checked),i(d=>({...d,[n]:c==="checkbox"?m:t}))},o=async s=>{s.preventDefault();const n=new URLSearchParams({phone:a.phone,first_name:a.firstName,last_name:a.lastName,region:String(a.region),is_sale:a.isSale?"1":"0",is_purchase:a.isPurchase?"1":"0",is_rental:a.isRental?"1":"0"}),t=await fetch("/register",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:n.toString(),credentials:"same-origin"});if(t.redirected)console.log("success",t),window.location.href=t.url;else if(!t.ok){const c=await t.text();alert(c)}};return e.jsxs("form",{onSubmit:o,children:[e.jsx(h,{label:"Ім’я",id:"first_name",name:"firstName",value:a.firstName,placeholder:"Введіть...",required:!0,onChange:l}),e.jsx(h,{label:"Прізвище",id:"last_name",name:"lastName",value:a.lastName,placeholder:"Введіть...",onChange:l}),e.jsx(h,{label:"Номер телефону",id:"phone",name:"phone",value:a.phone,placeholder:"Введіть...",required:!0,onChange:l}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"region_id",className:"form-label",children:"Область"}),e.jsx("select",{name:"region",id:"region_id",className:"form-control",value:a.region,onChange:l,children:r.map(s=>e.jsxs("option",{value:s.id,children:[s.oblast,s.district?" - ":""]},s.id))})]}),e.jsxs("div",{className:"role-group",children:[e.jsxs("div",{className:"role-option",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",name:"isSale",id:"is_sale",checked:a.isSale,onChange:l}),e.jsx("label",{htmlFor:"is_sale",children:"Продавець"})]}),e.jsxs("div",{className:"role-option",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",name:"isPurchase",id:"is_purchase",checked:a.isPurchase,onChange:l}),e.jsx("label",{htmlFor:"is_purchase",children:"Закупник"})]}),e.jsxs("div",{className:"role-option",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox",name:"isRental",id:"is_rental",checked:a.isRental,onChange:l}),e.jsx("label",{htmlFor:"is_rental",children:"Орендодавець"})]}),e.jsx("p",{className:"role-label",children:"Оберіть свою роль"})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("button",{type:"submit",className:"btn btn-primary save-btn",children:"Завершити реєстрацію"})})]})};export{f as default};
